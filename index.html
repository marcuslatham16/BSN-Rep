<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document Repository</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,400..700,0..1,0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="sidebar" id="sidebar">
    <div class="logo">
      <span class="material-symbols-outlined">folder</span>
      <h2>DocRepo</h2>
    </div>
    <nav>
      <div class="sidebar-item active">
        <span class="material-symbols-outlined">home</span> 
        <span>Home</span>
      </div>
      <a href="projects.html" class="sidebar-item">
        <span class="material-symbols-outlined">workspaces</span> 
        <span>Projects</span>
      </a>
      <div class="sidebar-item">
        <span class="material-symbols-outlined">area_chart</span> 
        <span>Reports</span>
      </div>
      <div class="sidebar-item">
        <span class="material-symbols-outlined">tune</span> 
        <span>Settings</span>
      </div>
    </nav>
  </div>

  <div class="content-wrapper">
    <header>
      <button id="menu-toggle" class="menu-toggle">
        <span class="material-symbols-outlined">menu</span>
      </button>
      
      <div class="header-inner">
        <div class="breadcrumb" id="breadcrumb">
          <span class="material-symbols-outlined">folder</span>
          Home
        </div>
        
        <div class="header-actions">
          <div class="search-bar">
            <span class="material-symbols-outlined">search</span>
            <input type="text" id="searchInput" placeholder="Search projects" oninput="handleSearch()" />
          </div>
          <button class="create-btn" onclick="openProjectDialog()" title="Create New Project">
            <span class="material-symbols-outlined">add</span>
          </button>
          <div class="user-info">
            <span class="material-symbols-outlined">account_circle</span>
            <div class="user-details">
              <strong>User Name</strong>
              <small>Admin</small>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="main-content">
      <!-- What's New Section -->
      <section class="whats-new-section">
        <div class="section-header">
          <div>
            <h2>What's New</h2>
            <p class="subtitle">Recent updates and activities</p>
          </div>
        </div>
        
        <div id="searchResultsSection" class="search-results-section" style="display: none;">
          <div class="section-header">
            <h3>Search Results</h3>
            <button id="clearSearchBtn" class="clear-search-btn">
              <span class="material-symbols-outlined">close</span>
              Clear Search
            </button>
          </div>
          <div id="searchResultsContainer" class="search-results-container"></div>
        </div>
        
        <div class="section-header">
          <h3>Followed Projects</h3>
        </div>
        
        <div id="followedProjectsSection">
          <!-- Followed projects will be loaded here via JavaScript -->
        </div>
      </section>
    </main>
  </div>

  <!-- Project Dialog -->
  <dialog id="projectDialog">
    <h2 id="dialogTitle">New Project</h2>
    <form id="projectForm">
      <div class="form-group">
        <label for="projectNameInput">Project Name</label>
        <input type="text" id="projectNameInput" placeholder="Enter project name" />
        <div id="nameError" class="error-message">Project name is required.</div>
      </div>
      
      <div class="form-group">
        <label for="projectDescInput">Description</label>
        <textarea id="projectDescInput" placeholder="Enter description"></textarea>
      </div>
      
      <div class="form-group">
        <label for="projectOwnerInput">Project Owner</label>
        <input type="text" id="projectOwnerInput" placeholder="Enter owner name" />
        <div id="ownerError" class="error-message">Project owner is required.</div>
      </div>
      
      <div class="form-group">
        <label for="projectStatusSelect">Status</label>
        <select id="projectStatusSelect" class="form-select">
          <option value="active">Active</option>
          <option value="pending">Pending</option>
          <option value="completed">Completed</option>
          <option value="archived">Archived</option>
        </select>
      </div>
      
      <div class="form-group checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" id="coachingRequiredInput" />
          <span>Coaching Required</span>
        </label>
      </div>
      
      <div class="form-group">
        <label>Permissions</label>
        <div class="permissions-options">
          <label class="checkbox-label">
            <input type="radio" name="permissions" value="read" id="permissionReadOnly" checked />
            <span>Read Only</span>
          </label>
          <label class="checkbox-label">
            <input type="radio" name="permissions" value="download" id="permissionDownload" />
            <span>Read & Download</span>
          </label>
          <label class="checkbox-label">
            <input type="radio" name="permissions" value="full" id="permissionFull" />
            <span>Full Control</span>
          </label>
        </div>
      </div>
      
      <div class="dialog-actions">
        <button type="button" id="saveBtn">
          <span class="material-symbols-outlined">save</span>
          <span id="saveBtnText">Create</span>
        </button>
        <button type="button" onclick="closeProjectDialog()">
          <span class="material-symbols-outlined">close</span>
          <span>Cancel</span>
        </button>
      </div>
    </form>
  </dialog>
  
  <!-- Folder Dialog -->
  <dialog id="folderDialog">
    <h2>New Folder</h2>
    <form id="folderForm">
      <div class="form-group">
        <label for="folderNameInput">Folder Name</label>
        <input type="text" id="folderNameInput" placeholder="Enter folder name" />
        <div id="folderNameError" class="error-message">Folder name is required.</div>
      </div>
      
      <div class="dialog-actions">
        <button type="button" id="createFolderBtn">
          <span class="material-symbols-outlined">create_new_folder</span>
          <span>Create Folder</span>
        </button>
        <button type="button" id="cancelFolderBtn">
          <span class="material-symbols-outlined">close</span>
          <span>Cancel</span>
        </button>
      </div>
    </form>
  </dialog>
  
  <!-- File Upload Dialog -->
  <dialog id="fileUploadDialog">
    <h2>Upload Files</h2>
    <form id="fileUploadForm">
      <div class="form-group">
        <label for="fileInput">Select Files</label>
        <div class="file-upload-container">
          <input type="file" id="fileInput" multiple />
          <button type="button" class="file-select-btn">
            <span class="material-symbols-outlined">upload_file</span>
            <span>Choose Files</span>
          </button>
        </div>
        <div id="selectedFiles" class="selected-files"></div>
      </div>
      
      <div class="dialog-actions">
        <button type="button" id="uploadFilesBtn">
          <span class="material-symbols-outlined">cloud_upload</span>
          <span>Upload</span>
        </button>
        <button type="button" id="cancelUploadBtn">
          <span class="material-symbols-outlined">close</span>
          <span>Cancel</span>
        </button>
      </div>
    </form>
  </dialog>
  <script src="shared.js"></script>
  
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      loadProjects();
      renderFollowedProjects();
  
      document.getElementById("saveBtn").addEventListener("click", handleSaveProject);
      document.getElementById("createFolderBtn").addEventListener("click", handleCreateFolder);
      document.getElementById("cancelFolderBtn").addEventListener("click", () => {
        document.getElementById("folderDialog").close();
      });
  
      document.getElementById("fileInput").addEventListener("change", handleFileSelection);
      document.querySelector(".file-select-btn").addEventListener("click", () => {
        document.getElementById("fileInput").click();
      });
  
      document.getElementById("menu-toggle").addEventListener("click", toggleSidebar);
  
      document.getElementById("clearSearchBtn").addEventListener("click", () => {
        document.getElementById("searchInput").value = "";
        document.getElementById("searchResultsSection").style.display = "none";
      });
    });
  </script>  
</body>
</html>